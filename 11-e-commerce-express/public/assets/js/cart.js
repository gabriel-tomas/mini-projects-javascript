(()=>{"use strict";function t(t,e){if("string"!=typeof t)throw"Key must be string";if(t.length<3)throw"Key must be greater than 2";e=JSON.stringify(e),localStorage.setItem(t,e)}function e(t){if("string"!=typeof t)throw"Key must be string";if(t.length<3)throw"Key must be greater than 2";var e=localStorage.getItem(t);return JSON.parse(e)}function n(){null===e("cart-items")?(document.querySelector("section.cart").style.display="none",document.querySelector("section.empty-cart").style.display="block"):document.querySelector("section.empty-cart").style.display="none"}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return e={},t.forEach((function(n){var i,o,a,c,u=(i=n,o=function(t){if(Array.isArray(t))return r(t)}(c=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=0,o.forEach((function(t){t===i&&a++})),a);t.forEach((function(e){delete t[t.indexOf(n)]})),e[n]=u})),e;var e}function o(){var t,n=[];try{t=(t=e("cart-items").split(",")).map((function(t){n.push(t.trim())}))}catch(r){t=e("cart-items"),n.push(t)}return n}function a(){}n(),a.prototype.setInitial=function(t){this.basePrice=t,Object.defineProperty(this,"total",{enumerable:!0,configurable:!0,get:function(){return String(this.basePrice.toFixed(2)).replace(".",",")}}),Object.defineProperty(this,"inCash",{enumerable:!0,configurable:!1,get:function(){return String((this.basePrice-.15*this.basePrice).toFixed(2)).replace(".",",")}}),Object.defineProperty(this,"cardInstallments12",{enumerable:!0,configurable:!1,get:function(){return String((this.basePrice/12).toFixed(2))}})},a.prototype.updateSummary=function(){document.querySelector(".total-price > span").innerText="$ ".concat(this.total),document.querySelector(".price-incash").innerText="$ ".concat(this.inCash),document.querySelector(".price-card").innerText="$ ".concat(this.total),document.querySelector(".container-card > p > span").innerText="$ ".concat(this.cardInstallments12)},a.prototype.updateTotal=function(t,e){"remove"===t&&(this.basePrice-=e),"add"===t&&(this.basePrice+=e),"clearAll"===t&&(this.basePrice=0)};const c=new a;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(i)?i:String(i)),r)}var i}var s=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.thumbnail=t.thumbnail,this.title=t.title,this.price=t.price,this.discountPercentage=t.discountPercentage,this.id=t.id}var r,i,o;return r=n,o=[{key:"addCartItemLclStrg",value:function(){var n;null!==(n=e("cart-items"))?t("cart-items","".concat(n,", ").concat(this.id)):t("cart-items",this.id)}},{key:"deleteCartItemLclStrg",value:function(){var n;null!==(n=e("cart-items"))&&((n=(n=n.split(",")).map((function(t){return t.trim()}))).splice(n.indexOf(String(this.id)),1),n=n.join(", "),t("cart-items","".concat(n)))}}],(i=[{key:"create",value:function(){var t=this.divParent,e=this.addToCartButton,n=this.containerAndThumb,r=this.bottomInfos;return t.appendChild(e),t.querySelector(".product-link").appendChild(n),t.querySelector(".product-link").appendChild(r),t}},{key:"divParent",get:function(){var t=document.createElement("div");t.setAttribute("product-id",this.id),t.classList.add("container-product");var e=document.createElement("a");return e.classList.add("product-link"),e.setAttribute("href","product.html?product_id=".concat(this.id)),t.append(e),t}},{key:"addToCartButton",get:function(){var t=this,e=document.createElement("button");e.classList.add("btn-add-to-cart");var r=document.createElement("span");return r.classList.add("material-symbols-outlined","font-size-md"),r.innerText="add_shopping_cart",e.appendChild(r),e.addEventListener("click",(function(){n.addCartItemLclStrg.bind(t)()})),e}},{key:"containerAndThumb",get:function(){var t=document.createElement("div");t.classList.add("container-thumbnail");var e=document.createElement("img");return e.setAttribute("src",this.thumbnail),t.appendChild(e),t}},{key:"bottomInfos",get:function(){var t=document.createElement("div");t.classList.add("container-bottom-infos");var e=document.createElement("div");e.classList.add("container-title");var n=document.createElement("span");n.classList.add("normal-font","font-size-base"),n.innerText=this.title,e.appendChild(n);var r=document.createElement("div");r.classList.add("container-price-and-others");var i=document.createElement("span");i.classList.add("span-price","normal-font","font-size-md"),i.innerText="$ ".concat(this.price);var o=document.createElement("span");return o.classList.add("discount","normal-font"),o.innerText="".concat(this.discountPercentage,"% OFF"),r.appendChild(i),r.appendChild(o),t.appendChild(e),t.appendChild(r),t}}])&&l(r.prototype,i),o&&l(r,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(i)?i:String(i)),r)}var i}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(r);if(i){var n=m(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).brand=t.brand,e.quantity=n,e.totalPrice=e.price*e.quantity,e}return e=a,(n=[{key:"create",value:function(){var t=this.divTableParent,e=this.trAndThs,n=this.trAndTds;t.querySelector("table").appendChild(e),t.querySelector("table").appendChild(n),this.addToParent(t)}},{key:"addToParent",value:function(t){document.querySelector(".items-cart").appendChild(t)}},{key:"divTableParent",get:function(){var t=document.createElement("div");t.classList.add("item-cart"),t.setAttribute("product-id",this.id);var e=document.createElement("table");return e.classList.add("table-product"),t.appendChild(e),t}},{key:"trAndThs",get:function(){var t=document.createElement("tr");t.classList.add("row-headers");for(var e=["Product","Quantity","Price"],n=0;n<3;n++){var r=document.createElement("th");r.classList.add("font-size-sm","font-wght-700"),r.innerText=e[n],t.appendChild(r)}return t}},{key:"trAndTds",get:function(){var t=this,e=document.createElement("tr");return e.classList.add("row-datas"),e.appendChild(function(){var e=document.createElement("td");e.classList.add("td-product");var n=document.createElement("div");n.classList.add("divImg");var r=document.createElement("img");r.setAttribute("src",t.thumbnail),n.appendChild(r);var i=document.createElement("div");i.classList.add("div-title");var o=document.createElement("h3");o.classList.add("font-normal","font-size-base","font-wght-700"),o.innerText=t.title,i.appendChild(o);var a=document.createElement("div");a.classList.add("div-brand");var c=document.createElement("span");return c.classList.add("font-normal","font-size-base"),c.innerText=t.brand,a.appendChild(c),e.appendChild(n),e.appendChild(i),e.appendChild(a),e}()),e.appendChild(function(){var e=function(){a.innerText=this.quantity}.bind(t),n=function(){this.tagPTotal.innerText="Total: $ ".concat(this.totalPrice)}.bind(t),r=function(){this.spanTimes.innerText="".concat(this.quantity,"x")}.bind(t),i=document.createElement("td");i.classList.add("td-quantity");var o=document.createElement("button");o.classList.add("btn-minus-product","font-size-base"),o.innerText="-";var a=document.createElement("span");a.classList.add("span-quantity","font-size-base"),e();var u=document.createElement("button");u.classList.add("btn-plus-product","font-size-base"),u.innerText="+";var l=function(t){if("add"===t)this.quantity>0&&(o.style.pointerEvents="all"),this.quantity++,this.totalPrice=this.price*this.quantity,n(),e(),r(),s.addCartItemLclStrg.bind(this)(),c.updateTotal("add",this.price),c.updateSummary();else if("remove"===t){if(this.quantity<=1)return void(o.style.pointerEvents="none");this.quantity--,this.totalPrice=this.price*this.quantity,n(),e(),r(),s.deleteCartItemLclStrg.bind(this)(),c.updateTotal("remove",this.price),c.updateSummary()}}.bind(t);return o.addEventListener("click",(function(){l("remove")})),u.addEventListener("click",(function(){l("add")})),i.appendChild(o),i.appendChild(a),i.appendChild(u),i}()),e.appendChild(function(){var e=document.createElement("td");e.classList.add("td-price");var n=document.createElement("p");return n.classList.add("font-size-base"),t.spanTimes=document.createElement("span"),t.spanTimes.innerText="".concat(t.quantity,"x"),n.innerText+=" $ ".concat(t.price),n.insertAdjacentElement("afterbegin",t.spanTimes),t.tagPTotal=document.createElement("p"),t.tagPTotal.classList.add("p-total","font-size-base"),t.tagPTotal.innerText="Total: $ ".concat(t.totalPrice),e.appendChild(n),e.appendChild(t.tagPTotal),e}()),e}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(s);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(i)?i:String(i)),r)}var i}const v=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"mainRoute",{enumerable:!0,writable:!1,configurable:!1,value:"https://dummyjson.com"}),Object.defineProperty(this,"allProductsRoute",{enumerable:!0,writable:!1,configurable:!1,value:"".concat(this.mainRoute,"/products")});var e=null;Object.defineProperty(this,"setSearchRoute",{get:function(){return e},set:function(t){"string"==typeof t&&(e="".concat(this.mainRoute,"/products/search?q=").concat(t))}});var n=null;Object.defineProperty(this,"setSingleRoute",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n="".concat(this.mainRoute,"/products/").concat(t)}}),Object.defineProperty(this,"allCategoriesRoute",{enumerable:!0,writable:!1,configurable:!1,value:"".concat(this.mainRoute,"/products/categories")});var r=null;Object.defineProperty(this,"setCategoryRoute",{get:function(){return r},set:function(t){"string"==typeof t&&(r="".concat(this.mainRoute,"/products/category/").concat(t))}})}var e,n,r;return e=t,n=[{key:"getAllProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2?arguments[2]:void 0;t.fetchRoute("".concat(this.allProductsRoute,"?skip=").concat(e,"&limit=").concat(n),r)}},{key:"setSearchProducts",value:function(e,n){this.setSearchRoute=e,t.fetchRoute(this.setSearchRoute,n)}},{key:"getAllCategories",value:function(e){t.fetchRoute(this.allCategoriesRoute,e)}},{key:"setCategoryProducts",value:function(e,n){this.setCategoryRoute=e,t.fetchRoute(this.setCategoryRoute,n)}},{key:"getSingleProduct",value:function(e,n){this.setSingleRoute=e,t.fetchRoute(this.setSingleRoute,n)}}],r=[{key:"fetchRoute",value:function(t,e){fetch(t).then((function(t){t.json().then((function(t){e&&e(t)}))}))}}],n&&b(e.prototype,n),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S;function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}S=i(o()),"null"!==Object.keys(S)[0]&&function(t){for(var e=0,n=0,r=function(){var t,r,a=(t=o[i],r=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,r)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],l=a[1];v.getSingleProduct(u,(function(t){var r;r=l>1?new y(t,l):new y(t),n+=Number(r.totalPrice),Object.keys(S).length-1===e&&(c.setInitial(n),c.updateSummary()),e++}))},i=0,o=Object.entries(t);i<o.length;i++)r()}(S),function(){var t=i(o());"null"!==Object.keys(t)[0]&&function(t){for(var e=function(){var t,e,i=(t=r[n],e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];v.getSingleProduct(o,(function(t){a>1?new y(t,a).create():new y(t).create()}))},n=0,r=Object.entries(t);n<r.length;n++)e()}(t)}(),document.querySelector(".clean-cart").addEventListener("click",(function(){var t;document.querySelectorAll(".items-cart > .item-cart").forEach((function(t){t.remove()})),t="cart-items",localStorage.removeItem(t),c.updateTotal("clearAll"),c.updateSummary(),n()}))})();
//# sourceMappingURL=cart.js.map